(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2898:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var a=r(2265),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let r=(0,a.forwardRef)(({color:r="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:u="",children:l,...d},m)=>(0,a.createElement)("svg",{ref:m,...i,width:n,height:n,stroke:r,strokeWidth:c?24*Number(o)/Number(n):o,className:["lucide",`lucide-${s(e)}`,u].join(" "),...d},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(l)?l:[l]]));return r.displayName=`${e}`,r}},7810:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var a=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,a.Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},1827:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var a=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,a.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},3505:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var a=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,a.Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},1326:function(e,t,r){"use strict";r.r(t),r.d(t,{AddToCartButton:function(){return u}});var a=r(7437),i=r(2265),s=r(3505),n=r(3611),o=r(4962),c=r(446);function u(e){let{product:t,className:r,size:u="default"}=e,[l,d]=(0,i.useState)(!1),{addItem:m}=(0,o.x)(),h=async()=>{d(!0);try{m({id:t.id,name:t.name,price:t.price,image:t.image,stock:t.stock}),(0,c.Am)({title:"Added to cart",description:"".concat(t.name," has been added to your cart.")})}catch(e){(0,c.Am)({title:"Error",description:"Failed to add item to cart. Please try again.",variant:"destructive"})}finally{d(!1)}};return(0,a.jsxs)(n.z,{onClick:h,disabled:l||0===t.stock,className:r,size:u,children:[(0,a.jsx)(s.Z,{className:"mr-2 h-4 w-4"}),l?"Adding...":0===t.stock?"Out of Stock":"Add to Cart"]})}},7323:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return n},useAuth:function(){return o}});var a=r(7437),i=r(2265);let s=(0,i.createContext)(void 0);function n(e){let{children:t}=e,[r,n]=(0,i.useState)(null),[o,c]=(0,i.useState)(!0);(0,i.useEffect)(()=>{let e=localStorage.getItem("user_token"),t=localStorage.getItem("user_data");if(e&&t)try{let e=JSON.parse(t);n(e)}catch(e){console.error("Error parsing user data:",e),localStorage.removeItem("user_token"),localStorage.removeItem("user_data")}c(!1)},[]);let u=async(e,t)=>{try{let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),a=await r.json();if(r.ok)return localStorage.setItem("user_token",a.token),localStorage.setItem("user_data",JSON.stringify(a.user)),n(a.user),!0;return!1}catch(e){return console.error("Login error:",e),!1}};return(0,a.jsx)(s.Provider,{value:{user:r,isAuthenticated:!!r,login:u,logout:()=>{localStorage.removeItem("user_token"),localStorage.removeItem("user_data"),n(null)},loading:o},children:t})}function o(){let e=(0,i.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3130:function(e,t,r){"use strict";r.r(t),r.d(t,{ClientWrapper:function(){return i}});var a=r(7437);function i(e){let{children:t}=e;return(0,a.jsx)(a.Fragment,{children:t})}},5168:function(e,t,r){"use strict";r.r(t),r.d(t,{ProductFilters:function(){return c}});var a=r(7437),i=r(4033),s=r(3611);let n=[{id:"all",name:"All Categories"},{id:"Electronics",name:"Electronics"},{id:"Homeware",name:"Homeware"},{id:"Gadgets",name:"Gadgets"}],o=[{id:"newest",name:"Newest First"},{id:"price-low",name:"Price: Low to High"},{id:"price-high",name:"Price: High to Low"},{id:"name",name:"Name A-Z"}];function c(){let e=(0,i.useRouter)(),t=(0,i.useSearchParams)(),r=(r,a)=>{let i=new URLSearchParams(t);"all"===a||""===a?i.delete(r):i.set(r,a),i.delete("page"),e.push("/products?".concat(i.toString()))};return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters"}),(0,a.jsx)(s.z,{variant:"ghost",size:"sm",onClick:()=>{e.push("/products")},children:"Clear All"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Category"}),(0,a.jsx)("div",{className:"space-y-2",children:n.map(e=>(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"category",value:e.id,checked:t.get("category")===e.id||!t.get("category")&&"all"===e.id,onChange:e=>r("category",e.target.value),className:"mr-2"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e.name})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Price Range"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:"Min Price"}),(0,a.jsx)("input",{type:"number",placeholder:"R0",value:t.get("minPrice")||"",onChange:e=>r("minPrice",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:"Max Price"}),(0,a.jsx)("input",{type:"number",placeholder:"R50000",value:t.get("maxPrice")||"",onChange:e=>r("maxPrice",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Sort By"}),(0,a.jsx)("select",{value:t.get("sort")||"newest",onChange:e=>r("sort",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:o.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]})]})}},3939:function(e,t,r){"use strict";r.r(t),r.d(t,{ProductSearch:function(){return c}});var a=r(7437),i=r(2265),s=r(4033),n=r(1827),o=r(3611);function c(){let e=(0,s.useRouter)(),t=(0,s.useSearchParams)(),[r,c]=(0,i.useState)(t.get("search")||"");return(0,a.jsxs)("form",{onSubmit:a=>{a.preventDefault();let i=new URLSearchParams(t);r?i.set("search",r):i.delete("search"),i.delete("page"),e.push("/products?".concat(i.toString()))},className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-lg",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search products...",value:r,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,a.jsx)(n.Z,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]}),(0,a.jsx)(o.z,{type:"submit",children:"Search"})]})}},3611:function(e,t,r){"use strict";r.d(t,{z:function(){return u}});var a=r(7437),i=r(2265),s=r(7256),n=r(6061),o=r(1628);let c=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=i.forwardRef((e,t)=>{let{className:r,variant:i,size:n,asChild:u=!1,...l}=e,d=u?s.g7:"button";return(0,a.jsx)(d,{className:(0,o.cn)(c({variant:i,size:n,className:r})),ref:t,...l})});u.displayName="Button"},762:function(e,t,r){"use strict";r.r(t),r.d(t,{WishlistButton:function(){return d}});var a=r(7437),i=r(2265),s=r(7810),n=r(3611),o=r(4962),c=r(446),u=r(7323),l=r(4033);function d(e){let{product:t,className:r,size:d="icon"}=e,[m,h]=(0,i.useState)(!1),[f,g]=(0,i.useState)(!1),{addItem:p,removeItem:y,isInWishlist:v}=(0,o.Y)(),{isAuthenticated:x}=(0,u.useAuth)(),b=(0,l.useRouter)(),S=!!f&&v(t.id);(0,i.useEffect)(()=>{g(!0)},[]);let w=async()=>{if(!x){(0,c.Am)({title:"Login Required",description:"Please log in to add items to your wishlist.",variant:"destructive"}),b.push("/login?redirect=".concat(encodeURIComponent(window.location.pathname)));return}h(!0);try{S?(y(t.id),(0,c.Am)({title:"Removed from wishlist",description:"".concat(t.name," has been removed from your wishlist.")})):(p({id:t.id,name:t.name,price:t.price,image:t.image}),(0,c.Am)({title:"Added to wishlist",description:"".concat(t.name," has been added to your wishlist.")}))}catch(e){(0,c.Am)({title:"Error",description:"Failed to update wishlist. Please try again.",variant:"destructive"})}finally{h(!1)}};return(0,a.jsxs)(n.z,{onClick:w,disabled:m,variant:S?"default":"outline",className:r,size:d,children:[(0,a.jsx)(s.Z,{className:"h-4 w-4 ".concat(S?"fill-current":"")}),"icon"!==d&&(S?"In Wishlist":"Add to Wishlist")]})}},446:function(e,t,r){"use strict";r.d(t,{Am:function(){return d},pm:function(){return m}});var a=r(2265);let i=0,s=new Map,n=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],u={toasts:[]};function l(e){u=o(u,e),c.forEach(e=>{e(u)})}function d(e){let{...t}=e,r=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>l({type:"DISMISS_TOAST",toastId:r});return l({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=a.useState(u);return a.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},4962:function(e,t,r){"use strict";r.d(t,{Y:function(){return n},x:function(){return s}});var a=r(4660),i=r(4810);let s=(0,a.Ue)()((0,i.tJ)((e,t)=>({items:[],addItem:t=>e(e=>{let r=e.items.find(e=>e.id===t.id);return r?{items:e.items.map(e=>e.id===t.id?{...e,quantity:Math.min(e.quantity+1,e.stock)}:e)}:{items:[...e.items,{...t,quantity:1}]}}),removeItem:t=>e(e=>({items:e.items.filter(e=>e.id!==t)})),updateQuantity:(t,r)=>e(e=>({items:e.items.map(e=>e.id===t?{...e,quantity:Math.max(0,Math.min(r,e.stock))}:e).filter(e=>e.quantity>0)})),clearCart:()=>e({items:[]}),getTotalItems:()=>{let{items:e}=t();return e.reduce((e,t)=>e+t.quantity,0)},getTotalPrice:()=>{let{items:e}=t();return e.reduce((e,t)=>e+t.price*t.quantity,0)}}),{name:"cart-storage"})),n=(0,a.Ue)()((0,i.tJ)((e,t)=>({items:[],addItem:t=>e(e=>{let r=e.items.find(e=>e.id===t.id);return r?e:{items:[...e.items,t]}}),removeItem:t=>e(e=>({items:e.items.filter(e=>e.id!==t)})),isInWishlist:e=>{let{items:r}=t();return r.some(t=>t.id===e)},clearWishlist:()=>e({items:[]})}),{name:"wishlist-storage"}))},1628:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var a=r(7042),i=r(4769);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.m6)((0,a.W)(t))}},4033:function(e,t,r){e.exports=r(94)}}]);