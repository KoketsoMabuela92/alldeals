(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[668],{8203:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var r=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},1298:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var r=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},6712:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var r=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},6205:function(e,s,t){Promise.resolve().then(t.bind(t,5369))},5369:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return j}});var r=t(7437),a=t(2265),l=t(4424),n=t(8203),c=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,c.Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),i=(0,c.Z)("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);var x=t(1298),o=t(6712),m=t(5750),h=t(4322),u=t(4689);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,c.Z)("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),v=(0,c.Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);var p=t(3611);function j(){let[e,s]=(0,a.useState)(!0),[t,c]=(0,a.useState)("30d"),[j,y]=(0,a.useState)(null);(0,a.useEffect)(()=>{N()},[t]);let N=async()=>{try{var e,r,a;s(!0);let l=new URLSearchParams({period:"last30days"===t?"30":"last7days"===t?"7":"last90days"===t?"90":"30"}),n=await fetch("/api/admin/analytics?".concat(l));if(!n.ok)throw Error("Failed to fetch analytics");let c=await n.json(),d=c.analytics,i={revenue:{current:d.overview.totalRevenue||0,previous:.8*d.overview.totalRevenue||0,change:d.overview.revenueGrowth||0},orders:{current:d.overview.totalOrders||0,previous:.85*d.overview.totalOrders||0,change:d.overview.ordersGrowth||0},customers:{current:d.overview.totalCustomers||0,previous:.9*d.overview.totalCustomers||0,change:15},products:{current:d.overview.totalProducts||0,previous:.95*d.overview.totalProducts||0,change:5},topProducts:(null===(e=d.topProducts)||void 0===e?void 0:e.slice(0,4).map(e=>({id:e.productId||"unknown",name:e.name||"Unknown Product",sales:e.quantitySold||0,revenue:e.revenue||0,image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=100&h=100&fit=crop"})))||[],monthlyRevenue:(null===(r=d.revenueByMonth)||void 0===r?void 0:r.map(e=>({month:e.month||"Unknown",revenue:e.revenue||0,orders:e.orderCount||0})))||[],topCategories:d.topCategories||[],recentOrders:(null===(a=d.recentOrders)||void 0===a?void 0:a.map(e=>({id:e.orderNumber||e.id,customer:e.customer||"Unknown Customer",total:e.total||0,status:e.status||"unknown",date:e.createdAt||new Date().toISOString()})))||[]};y(i)}catch(e){console.error("Error fetching analytics:",e),y({revenue:{current:0,previous:0,change:0},orders:{current:0,previous:0,change:0},customers:{current:0,previous:0,change:0},products:{current:0,previous:0,change:0},topProducts:[],topCategories:[],recentOrders:[],monthlyRevenue:[]})}finally{s(!1)}},f=e=>"R".concat(e.toLocaleString()),w=e=>"".concat(e>=0?"+":"").concat(e.toFixed(1),"%"),b=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e?(0,r.jsx)(l.l,{children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):j?(0,r.jsx)(l.l,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics Dashboard"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Track your store's performance and insights"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("select",{value:t,onChange:e=>c(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"7d",children:"Last 7 days"}),(0,r.jsx)("option",{value:"30d",children:"Last 30 days"}),(0,r.jsx)("option",{value:"90d",children:"Last 90 days"}),(0,r.jsx)("option",{value:"1y",children:"Last year"})]}),(0,r.jsxs)(p.z,{variant:"outline",children:[(0,r.jsx)(n.Z,{className:"w-4 h-4 mr-2"}),"Export Report"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f(j.revenue.current)}),(0,r.jsxs)("div",{className:"flex items-center mt-2",children:[j.revenue.change>=0?(0,r.jsx)(d,{className:"w-4 h-4 text-green-500 mr-1"}):(0,r.jsx)(i,{className:"w-4 h-4 text-red-500 mr-1"}),(0,r.jsx)("span",{className:"text-sm font-medium ".concat(j.revenue.change>=0?"text-green-600":"text-red-600"),children:w(j.revenue.change)}),(0,r.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"vs last period"})]})]}),(0,r.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,r.jsx)(x.Z,{className:"w-6 h-6 text-green-600"})})]})}),(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:j.orders.current.toLocaleString()}),(0,r.jsxs)("div",{className:"flex items-center mt-2",children:[j.orders.change>=0?(0,r.jsx)(d,{className:"w-4 h-4 text-green-500 mr-1"}):(0,r.jsx)(i,{className:"w-4 h-4 text-red-500 mr-1"}),(0,r.jsx)("span",{className:"text-sm font-medium ".concat(j.orders.change>=0?"text-green-600":"text-red-600"),children:w(j.orders.change)}),(0,r.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"vs last period"})]})]}),(0,r.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,r.jsx)(o.Z,{className:"w-6 h-6 text-blue-600"})})]})}),(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Customers"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:j.customers.current.toLocaleString()}),(0,r.jsxs)("div",{className:"flex items-center mt-2",children:[j.customers.change>=0?(0,r.jsx)(d,{className:"w-4 h-4 text-green-500 mr-1"}):(0,r.jsx)(i,{className:"w-4 h-4 text-red-500 mr-1"}),(0,r.jsx)("span",{className:"text-sm font-medium ".concat(j.customers.change>=0?"text-green-600":"text-red-600"),children:w(j.customers.change)}),(0,r.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"vs last period"})]})]}),(0,r.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg",children:(0,r.jsx)(m.Z,{className:"w-6 h-6 text-purple-600"})})]})}),(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Products"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:j.products.current.toLocaleString()}),(0,r.jsxs)("div",{className:"flex items-center mt-2",children:[j.products.change>=0?(0,r.jsx)(d,{className:"w-4 h-4 text-green-500 mr-1"}):(0,r.jsx)(i,{className:"w-4 h-4 text-red-500 mr-1"}),(0,r.jsx)("span",{className:"text-sm font-medium ".concat(j.products.change>=0?"text-green-600":"text-red-600"),children:w(j.products.change)}),(0,r.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"vs last period"})]})]}),(0,r.jsx)("div",{className:"p-3 bg-yellow-100 rounded-lg",children:(0,r.jsx)(h.Z,{className:"w-6 h-6 text-yellow-600"})})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Revenue Trend"}),(0,r.jsx)(u.Z,{className:"w-5 h-5 text-gray-400"})]}),(0,r.jsx)("div",{className:"space-y-4",children:j.monthlyRevenue.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-12 text-sm text-gray-600",children:e.month}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("div",{className:"bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(e.revenue/Math.max(...j.monthlyRevenue.map(e=>e.revenue))*100,"%")}})})})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:f(e.revenue)}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[e.orders," orders"]})]})]},e.month))})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Top Categories"}),(0,r.jsx)(g,{className:"w-5 h-5 text-gray-400"})]}),(0,r.jsx)("div",{className:"space-y-4",children:j.topCategories.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(0===s?"bg-blue-500":1===s?"bg-green-500":2===s?"bg-yellow-500":"bg-purple-500")}),(0,r.jsx)("span",{className:"text-sm text-gray-900",children:e.name})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.sales," sales"]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[e.percentage,"%"]})]})]},e.name))})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Top Selling Products"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"space-y-4",children:j.topProducts.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,r.jsx)(h.Z,{className:"w-6 h-6 text-gray-400"})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[e.sales," sales"]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:f(e.revenue)}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(v,{className:"w-3 h-3 text-yellow-400 mr-1"}),(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["#",s+1]})]})]})]},e.id))})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"space-y-4",children:j.recentOrders.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(o.Z,{className:"w-4 h-4 text-blue-600"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.id}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.customer})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:f(e.total)}),(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ".concat(b(e.status)),children:e.status})]})]},e.id))})})]})]})]})}):(0,r.jsx)(l.l,{children:(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Failed to load analytics"})})})}}},function(e){e.O(0,[621,326,424,971,472,560],function(){return e(e.s=6205)}),_N_E=e.O()}]);