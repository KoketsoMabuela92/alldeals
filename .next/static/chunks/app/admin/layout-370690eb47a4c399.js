(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{6111:function(e,n,t){Promise.resolve().then(t.bind(t,5564))},5564:function(e,n,t){"use strict";t.r(n),t.d(n,{AdminProvider:function(){return u},useAdmin:function(){return l}});var r=t(7437),o=t(2265),i=t(4033);let a=(0,o.createContext)(void 0);function u(e){let{children:n}=e,[t,u]=(0,o.useState)(null),[l,s]=(0,o.useState)(!0),c=(0,i.useRouter)(),d=(0,i.usePathname)();return((0,o.useEffect)(()=>{let e=async()=>{let e=localStorage.getItem("admin_token");if(!e){"/admin/login"!==d&&c.push("/admin/login"),s(!1);return}try{let n=await fetch("/api/admin/auth/verify",{headers:{Authorization:"Bearer ".concat(e)}});if(n.ok){let e=await n.json();u(e.user),"/admin/login"===d&&c.push("/admin/dashboard")}else localStorage.removeItem("admin_token"),"/admin/login"!==d&&c.push("/admin/login")}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("admin_token"),"/admin/login"!==d&&c.push("/admin/login")}finally{s(!1)}};e()},[d,c]),l)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,r.jsx)(a.Provider,{value:{user:t,isLoading:l,logout:()=>{localStorage.removeItem("admin_token"),u(null),c.push("/admin/login")}},children:n})}function l(){let e=(0,o.useContext)(a);if(void 0===e)throw Error("useAdmin must be used within an AdminProvider");return e}},622:function(e,n,t){"use strict";var r=t(2265),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function s(e,n,t){var r,i={},s=null,c=null;for(r in void 0!==t&&(s=""+t),void 0!==n.key&&(s=""+n.key),void 0!==n.ref&&(c=n.ref),n)a.call(n,r)&&!l.hasOwnProperty(r)&&(i[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps)void 0===i[r]&&(i[r]=n[r]);return{$$typeof:o,type:e,key:s,ref:c,props:i,_owner:u.current}}n.Fragment=i,n.jsx=s,n.jsxs=s},7437:function(e,n,t){"use strict";e.exports=t(622)},4033:function(e,n,t){e.exports=t(94)}},function(e){e.O(0,[971,472,560],function(){return e(e.s=6111)}),_N_E=e.O()}]);