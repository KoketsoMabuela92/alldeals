(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{6552:function(e,t,s){Promise.resolve().then(s.bind(s,8698))},8698:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var r=s(7437),i=s(2265),n=s(7106),a=s(6974),d=s(3611),l=s(4962);function c(){let e=(0,a.useStripe)(),t=(0,a.useElements)(),{clearCart:s}=(0,l.x)(),[n,c]=(0,i.useState)(!1),[o,m]=(0,i.useState)(""),u=async r=>{if(r.preventDefault(),!e||!t)return;c(!0);let{error:i}=await e.confirmPayment({elements:t,confirmParams:{return_url:"".concat(window.location.origin,"/checkout/success")}});i?"card_error"===i.type||"validation_error"===i.type?m(i.message||"An error occurred."):m("An unexpected error occurred."):s(),c(!1)};return(0,r.jsxs)("form",{onSubmit:u,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Shipping Address"}),(0,r.jsx)(a.AddressElement,{options:{mode:"shipping",allowedCountries:["US","CA"]}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Payment Method"}),(0,r.jsx)(a.PaymentElement,{})]}),o&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md",children:o}),(0,r.jsx)(d.z,{type:"submit",disabled:n||!e||!t,className:"w-full",size:"lg",children:n?"Processing...":"Complete Order"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"Your payment information is secure and encrypted."})]})}var o=s(6691),m=s.n(o);function u(){let{items:e,getTotalPrice:t}=(0,l.x)(),s=t(),i=s>50?0:9.99,n=.08*s;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 sticky top-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Order Summary"}),(0,r.jsx)("div",{className:"space-y-4 mb-6",children:e.map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(m(),{src:e.image,alt:e.name,width:60,height:60,className:"rounded-md object-cover"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Qty: ",e.quantity]})]}),(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["$",(e.price*e.quantity).toFixed(2)]})]},e.id))}),(0,r.jsxs)("div",{className:"space-y-3 border-t pt-4",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,r.jsxs)("span",{className:"font-medium",children:["$",s.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Shipping"}),(0,r.jsx)("span",{className:"font-medium",children:0===i?"Free":"$".concat(i.toFixed(2))})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Tax"}),(0,r.jsxs)("span",{className:"font-medium",children:["$",n.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-3",children:[(0,r.jsx)("span",{children:"Total"}),(0,r.jsxs)("span",{children:["$",(s+i+n).toFixed(2)]})]})]}),s<=50&&(0,r.jsx)("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-md p-3",children:(0,r.jsxs)("p",{className:"text-sm text-blue-800",children:["Add $",(50-s).toFixed(2)," more for free shipping!"]})}),(0,r.jsx)("div",{className:"mt-6 pt-4 border-t",children:(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Secure 256-bit SSL encryption"]})})]})}var x=s(4033);let h=(0,n.J)("pk_test_51OQXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX");function f(){let{items:e,getTotalPrice:t}=(0,l.x)(),[s,n]=(0,i.useState)(""),[d,o]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{if(0===e.length){(0,x.redirect)("/cart");return}fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:t()+(t()>50?0:9.99)+.08*t()})}).then(e=>e.json()).then(e=>{n(e.clientSecret),o(!1)}).catch(e=>{console.error("Error:",e),o(!1)})},[e,t]),0===e.length)?null:(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Checkout"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Payment Details"}),d?(0,r.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,r.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading payment form..."})]}):s?(0,r.jsx)(a.Elements,{options:{clientSecret:s,appearance:{theme:"stripe"}},stripe:h,children:(0,r.jsx)(c,{})}):(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-red-600",children:"Failed to load payment form. Please try again."})})]}),(0,r.jsx)("div",{children:(0,r.jsx)(u,{})})]})]})})}},3611:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var r=s(7437),i=s(2265),n=s(7256),a=s(6061),d=s(1628);let l=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:s,variant:i,size:a,asChild:c=!1,...o}=e,m=c?n.g7:"button";return(0,r.jsx)(m,{className:(0,d.cn)(l({variant:i,size:a,className:s})),ref:t,...o})});c.displayName="Button"},4962:function(e,t,s){"use strict";s.d(t,{Y:function(){return a},x:function(){return n}});var r=s(4660),i=s(4810);let n=(0,r.Ue)()((0,i.tJ)((e,t)=>({items:[],addItem:t=>e(e=>{let s=e.items.find(e=>e.id===t.id);return s?{items:e.items.map(e=>e.id===t.id?{...e,quantity:Math.min(e.quantity+1,e.stock)}:e)}:{items:[...e.items,{...t,quantity:1}]}}),removeItem:t=>e(e=>({items:e.items.filter(e=>e.id!==t)})),updateQuantity:(t,s)=>e(e=>({items:e.items.map(e=>e.id===t?{...e,quantity:Math.max(0,Math.min(s,e.stock))}:e).filter(e=>e.quantity>0)})),clearCart:()=>e({items:[]}),getTotalItems:()=>{let{items:e}=t();return e.reduce((e,t)=>e+t.quantity,0)},getTotalPrice:()=>{let{items:e}=t();return e.reduce((e,t)=>e+t.price*t.quantity,0)}}),{name:"cart-storage"})),a=(0,r.Ue)()((0,i.tJ)((e,t)=>({items:[],addItem:t=>e(e=>{let s=e.items.find(e=>e.id===t.id);return s?e:{items:[...e.items,t]}}),removeItem:t=>e(e=>({items:e.items.filter(e=>e.id!==t)})),isInWishlist:e=>{let{items:s}=t();return s.some(t=>t.id===e)},clearWishlist:()=>e({items:[]})}),{name:"wishlist-storage"}))},1628:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(7042),i=s(4769);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.m6)((0,r.W)(t))}}},function(e){e.O(0,[621,413,166,656,971,472,560],function(){return e(e.s=6552)}),_N_E=e.O()}]);