"use strict";(()=>{var e={};e.id=3002,e.ids=[3002],e.modules={53524:e=>{e.exports=require("@prisma/client")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},6408:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>w,originalPathname:()=>y,patchFetch:()=>v,requestAsyncStorage:()=>h,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>f});var a={};t.r(a),t.d(a,{POST:()=>p});var s=t(10884),i=t(16132),n=t(21040),o=t(95798),u=t(15204),l=t(62421),d=t.n(l);async function p(e){try{let r=await e.json(),{email:t,password:a,firstName:s,lastName:i,phone:n,address:l,city:p,country:c,postalCode:h}=r;if(!t||!a)return o.Z.json({error:"Email and password are required"},{status:400});let m=await u._.user.findUnique({where:{email:t}});if(m)return o.Z.json({error:"User with this email already exists"},{status:400});let g=await d().hash(a,12),w=await u._.user.create({data:{email:t,password:g,name:`${s||""} ${i||""}`.trim()||null,firstName:s||null,lastName:i||null,phone:n||null,address:l||null,city:p||null,country:c||null,postalCode:h||null,isActive:!0,lastLogin:new Date},select:{id:!0,email:!0,name:!0,firstName:!0,lastName:!0,phone:!0,address:!0,city:!0,country:!0,createdAt:!0}});return o.Z.json({message:"User registered successfully",user:w},{status:201})}catch(e){return console.error("Registration error:",e),o.Z.json({error:"Failed to register user"},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"/Users/koketsomabuela/alldeals/app/api/auth/register/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:h,staticGenerationAsyncStorage:m,serverHooks:g,headerHooks:w,staticGenerationBailout:f}=c,y="/api/auth/register/route";function v(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},15204:(e,r,t)=>{t.d(r,{_:()=>i});var a=t(53524);let s=globalThis,i=s.prisma??new a.PrismaClient}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[3271,8107,2421],()=>t(6408));module.exports=a})();