"use strict";exports.id=4876,exports.ids=[4876],exports.modules={91391:(e,t,r)=>{r.r(t),r.d(t,{AddToCartButton:()=>c});var s=r(53854),a=r(34218),i=r(17112),n=r(7857),o=r(54299),l=r(31974);function c({product:e,className:t,size:r="default"}){let[c,d]=(0,a.useState)(!1),{addItem:m}=(0,o.x)(),u=async()=>{d(!0);try{m({id:e.id,name:e.name,price:e.price,image:e.image,stock:e.stock}),(0,l.Am)({title:"Added to cart",description:`${e.name} has been added to your cart.`})}catch(e){(0,l.Am)({title:"Error",description:"Failed to add item to cart. Please try again.",variant:"destructive"})}finally{d(!1)}};return(0,s.jsxs)(n.z,{onClick:u,disabled:c||0===e.stock,className:t,size:r,children:[s.jsx(i.Z,{className:"mr-2 h-4 w-4"}),c?"Adding...":0===e.stock?"Out of Stock":"Add to Cart"]})}},38746:(e,t,r)=>{r.r(t),r.d(t,{ClientWrapper:()=>a});var s=r(53854);function a({children:e}){return s.jsx(s.Fragment,{children:e})}},51953:(e,t,r)=>{r.r(t),r.d(t,{WishlistButton:()=>m});var s=r(53854),a=r(34218),i=r(67510),n=r(7857),o=r(54299),l=r(31974),c=r(58761),d=r(51018);function m({product:e,className:t,size:r="icon"}){let[m,u]=(0,a.useState)(!1),[h,g]=(0,a.useState)(!1),{addItem:x,removeItem:p,isInWishlist:b}=(0,o.Y)(),{isAuthenticated:f}=(0,c.useAuth)(),v=(0,d.useRouter)(),y=!!h&&b(e.id);(0,a.useEffect)(()=>{g(!0)},[]);let w=async()=>{if(!f){(0,l.Am)({title:"Login Required",description:"Please log in to add items to your wishlist.",variant:"destructive"}),v.push(`/login?redirect=${encodeURIComponent(window.location.pathname)}`);return}u(!0);try{y?(p(e.id),(0,l.Am)({title:"Removed from wishlist",description:`${e.name} has been removed from your wishlist.`})):(x({id:e.id,name:e.name,price:e.price,image:e.image}),(0,l.Am)({title:"Added to wishlist",description:`${e.name} has been added to your wishlist.`}))}catch(e){(0,l.Am)({title:"Error",description:"Failed to update wishlist. Please try again.",variant:"destructive"})}finally{u(!1)}};return(0,s.jsxs)(n.z,{onClick:w,disabled:m,variant:y?"default":"outline",className:t,size:r,children:[s.jsx(i.Z,{className:`h-4 w-4 ${y?"fill-current":""}`}),"icon"!==r&&(y?"In Wishlist":"Add to Wishlist")]})}},90713:(e,t,r)=>{r.d(t,{a:()=>o});var s=r(95153);let a=(0,s.createProxy)(String.raw`/Users/koketsomabuela/alldeals/components/add-to-cart-button.tsx`),{__esModule:i,$$typeof:n}=a;a.default;let o=(0,s.createProxy)(String.raw`/Users/koketsomabuela/alldeals/components/add-to-cart-button.tsx#AddToCartButton`)},40376:(e,t,r)=>{r.d(t,{t:()=>o});var s=r(95153);let a=(0,s.createProxy)(String.raw`/Users/koketsomabuela/alldeals/components/client-wrapper.tsx`),{__esModule:i,$$typeof:n}=a;a.default;let o=(0,s.createProxy)(String.raw`/Users/koketsomabuela/alldeals/components/client-wrapper.tsx#ClientWrapper`)},40405:(e,t,r)=>{r.d(t,{e:()=>x});var s=r(4656),a=r(58639),i=r.n(a),n=r(24353),o=r.n(n),l=r(43105),c=r(20424),d=r(15204),m=r(4724),u=r(90713),h=r(24372),g=r(40376);async function x({searchParams:e}){let t=parseInt(e.page||"1"),r=(t-1)*12,a={};e.search&&(a.OR=[{name:{contains:e.search}},{description:{contains:e.search}}]),e.category&&"all"!==e.category&&(a.category={name:e.category}),e.minPrice&&(a.price={...a.price,gte:parseFloat(e.minPrice)}),e.maxPrice&&(a.price={...a.price,lte:parseFloat(e.maxPrice)}),"true"===e.sale&&(a.originalPrice={not:null},a.AND=[{originalPrice:{gt:0}}]);let n={createdAt:"desc"};switch(e.sort){case"price-low":n={price:"asc"};break;case"price-high":n={price:"desc"};break;case"name":n={name:"asc"};break;default:n={createdAt:"desc"}}let[x,p]=await Promise.all([d._.product.findMany({where:a,orderBy:n,skip:r,take:12,include:{category:!0,subcategory:!0,images:!0,reviews:{select:{rating:!0}}}}),d._.product.count({where:a})]),b=Math.ceil(p/12);return(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("p",{className:"text-gray-600",children:["Showing ",r+1,"-",Math.min(r+12,p)," of ",p," products"]})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(e=>{let t=e.reviews.length>0?e.reviews.reduce((e,t)=>e+t.rating,0)/e.reviews.length:0,r=e.images?.[0]?.url&&""!==e.images[0].url.trim()?e.images[0].url:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=800&q=80",a=e.originalPrice?(0,m.HU)(e.originalPrice,e.price):"";return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 overflow-hidden group",children:[(0,s.jsxs)("div",{className:"relative",children:[s.jsx(i(),{src:r,alt:e.name,width:400,height:300,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),s.jsx(g.t,{children:s.jsx(h.s,{product:{id:e.id,name:e.name,price:e.price,image:r},size:"icon",className:"absolute top-2 right-2 bg-white/80 hover:bg-white"})}),a&&s.jsx("div",{className:"absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded text-xs font-semibold",children:a}),e.stock<10&&s.jsx("div",{className:"absolute bottom-2 left-2 bg-orange-500 text-white px-2 py-1 rounded text-xs font-semibold",children:"Low Stock"})]}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-1",children:[s.jsx("span",{children:e.category.name}),e.subcategory&&s.jsx("span",{children:e.subcategory.name})]}),(0,s.jsxs)("div",{className:"mb-2",children:[e.brand&&s.jsx("div",{className:"text-xs text-blue-600 font-medium mb-1",children:e.brand}),s.jsx("h3",{className:"font-semibold text-gray-900 line-clamp-2 text-sm",children:e.name})]}),e.reviews.length>0&&(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[s.jsx("div",{className:"flex items-center",children:[void 0,void 0,void 0,void 0,void 0].map((e,r)=>s.jsx(l.Z,{className:`h-3 w-3 ${r<Math.floor(t)?"text-yellow-400 fill-current":"text-gray-300"}`},r))}),(0,s.jsxs)("span",{className:"text-xs text-gray-600 ml-1",children:["(",e.reviews.length,")"]})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-lg font-bold text-gray-900",children:(0,m.T4)(e.price)}),e.originalPrice&&e.originalPrice>e.price&&s.jsx("span",{className:"text-sm text-gray-500 line-through",children:(0,m.T4)(e.originalPrice)})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.stock," in stock"]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(g.t,{children:s.jsx(u.a,{product:{id:e.id,name:e.name,price:e.price,image:r,stock:e.stock},className:"w-full",size:"sm"})}),s.jsx(c.z,{asChild:!0,variant:"outline",className:"w-full",size:"sm",children:s.jsx(o(),{href:`/products/${e.id}`,children:"View Details"})})]})]})]},e.id)})}),b>1&&(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[t>1&&s.jsx(o(),{href:`/products?${new URLSearchParams({...e,page:(t-1).toString()}).toString()}`,className:"px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Previous"}),Array.from({length:Math.min(5,b)},(r,a)=>{let i=Math.max(1,t-2)+a;return i>b?null:s.jsx(o(),{href:`/products?${new URLSearchParams({...e,page:i.toString()}).toString()}`,className:`px-3 py-2 text-sm rounded-md ${i===t?"bg-blue-600 text-white":"bg-white border border-gray-300 hover:bg-gray-50"}`,children:i},i)}),t<b&&s.jsx(o(),{href:`/products?${new URLSearchParams({...e,page:(t+1).toString()}).toString()}`,className:"px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Next"})]})]})}},20424:(e,t,r)=>{r.d(t,{z:()=>d});var s=r(4656),a=r(3542),i=r(40949),n=r(98858),o=r(35143),l=r(15011);let c=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,...n},d)=>{let m=a?i.g7:"button";return s.jsx(m,{className:function(...e){return(0,l.m6)((0,o.W)(e))}(c({variant:t,size:r,className:e})),ref:d,...n})});d.displayName="Button"},24372:(e,t,r)=>{r.d(t,{s:()=>o});var s=r(95153);let a=(0,s.createProxy)(String.raw`/Users/koketsomabuela/alldeals/components/wishlist-button.tsx`),{__esModule:i,$$typeof:n}=a;a.default;let o=(0,s.createProxy)(String.raw`/Users/koketsomabuela/alldeals/components/wishlist-button.tsx#WishlistButton`)},4724:(e,t,r)=>{function s(e){return new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function a(e,t){let r=!e||e<=t?0:Math.round((e-t)/e*100);return r>0?`${r}% OFF`:""}r.d(t,{HU:()=>a,T4:()=>s})},15204:(e,t,r)=>{r.d(t,{_:()=>i});var s=r(53524);let a=globalThis,i=a.prisma??new s.PrismaClient}};